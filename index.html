<html>

<head>
    <title>PWA Map Services</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <link rel="stylesheet" href="leaflet.css" />
    <script src="leaflet.js"></script>
    <script src="map.js"></script>

</head>

<body>
    <h1><img src='img/hdb.png' width="40" height"40"></img>  PWA Map Carpark Prototype</h1>
    <!--Creates a Div for Map-->
    <div id='map' style='height:500px;'></div>
</body>

<script>
    //Initialize OneMap and select one style
    //The parameters are Div name,Map style(default,night grey,original),Zoom, Latitude, Longitude and Opacity
    var map = onemap.initializeMap('map', "default", 60, 1.3, 103.8, 0.8)
    map.locate({ setView: true, maxZoom: 90 });

    //Setup configuration for REST API Services (Your Access Token)
    //Our Documentation @  https://docs.onemap.sg
    onemap.config("eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOjQzODEsInVzZXJfaWQiOjQzODEsImVtYWlsIjoic2hlcnlsLnllby4yMDE2QHNtdS5lZHUuc2ciLCJmb3JldmVyIjpmYWxzZSwiaXNzIjoiaHR0cDpcL1wvb20yLmRmZS5vbmVtYXAuc2dcL2FwaVwvdjJcL3VzZXJcL3Nlc3Npb24iLCJpYXQiOjE1ODg4MzExMTIsImV4cCI6MTU4OTI2MzExMiwibmJmIjoxNTg4ODMxMTEyLCJqdGkiOiI0MzcwMDdkOTA5NDM0ODhmNzZkZjlhNmI3ZDhlZGQzZCJ9.CV5lgfnEX6Ul2FpuWsXShIvIOX_tfbGKlL_pBgu2NWA");

    //Call Theme Services
    var themeObj = onemap.retrieveTheme("hdb_car_park_information");

    //Convert Themes that are Points into GeoJSON for overlaying
    var data = onemap.pointTheme2GeoJSON(themeObj);

    //Add GeoJSON to map
    var geojson = L.geoJSON(data, {
        onEachFeature: function (feature, layer) {
            layer.bindPopup('<h1>' + feature.properties.DESCRIPTION + '</h1><p>Description: ' + feature.properties.NAME + '</p>');
            //Sets Icon information
            var icon = L.icon({
                iconUrl: 'img/parking.png',
                iconSize: [30, 30]
            });
            layer.setIcon(icon)
        }
    });


    geojson.addTo(map);


    //Fit bound to markers
    map.fitBounds(geojson.getBounds());

</script>

</html>